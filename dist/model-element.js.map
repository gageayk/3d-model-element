{"version":3,"file":"model-element.js","sources":["../src/utils/model.js","../src/utils/url.js","../src/modelLoader.js","../src/utils/css.js","../src/utils/dom.js","../src/modelLayer.js","../src/modelElement.js","../src/loaders/gltf.js","../src/loaders/obj.js","../src/index.js"],"sourcesContent":["\r\nconst normalize = obj => {\r\n  let box = new THREE.Box3().setFromObject(obj);\r\n  let size = new THREE.Vector3();\r\n  box.getCenter(obj.position);\r\n  box.getSize(size);\r\n\r\n  let scale = 1 / Math.max(size.x, size.y);\r\n  obj.position.multiplyScalar(-scale);\r\n  obj.scale.multiplyScalar(scale);\r\n  obj.userData.size = size.multiplyScalar(scale).clone();\r\n  return obj;\r\n};\r\n\r\n\r\nconst createContainer = obj => {\r\n  let container = new THREE.Object3D();\r\n  container.add(obj);\r\n  return container;\r\n};\r\n\r\n\r\nexport default {\r\n  normalize,\r\n  createContainer\r\n};\r\n","\r\nconst getFileExtension = url => {\r\n  let path = url.split(/[?#]/)[0];\r\n  let segments = path.split('/');\r\n  let filename = segments.pop();\r\n  let ext = filename.split('.');\r\n  if (ext.length > 0) {\r\n    return '.' + ext.pop();\r\n  }\r\n}\r\n\r\nexport default {\r\n  getFileExtension\r\n}","import modelUtils from './utils/model';\r\nimport urlUtils from './utils/url';\r\n\r\n\r\nconst loaders = {};\r\n\r\n\r\nconst register = (ext, handler) => {\r\n  loaders[ext] = {\r\n    load: handler,\r\n    objectCache: {}\r\n  };\r\n};\r\n\r\n\r\nconst load = src => {\r\n  let loader;\r\n  let object;\r\n  let ext = urlUtils.getFileExtension(src);\r\n\r\n  if (ext) {\r\n    loader = loaders[ext];\r\n  }\r\n\r\n  if (!loader) {\r\n    console.error(`Couldn't load \"${src}\". Unknown object format \"${ext}\"`);\r\n    return Promise.reject();\r\n  }\r\n\r\n  object = loader.objectCache[src];\r\n  if (!object) {\r\n    object = loader.load(src).then(obj => {\r\n      // To help make sizing easier to deal with we normalize the models \r\n      // dimenstions so its maximum width / height is 1. When rendering the\r\n      // object we can scale it up by the width of the target DOM element.\r\n      modelUtils.normalize(obj);\r\n\r\n      // Finally the model is inserted into a container.\r\n      return modelUtils.createContainer(obj);\r\n    });\r\n    loader.objectCache[src] = object;\r\n  }\r\n  \r\n  return object.then(model => model.clone());\r\n};\r\n\r\n\r\nexport default {\r\n  load,\r\n  register\r\n};\r\n","/**\r\n * Strips the unit from a value (i.e. 100.55px) and converts the remaining\r\n * value to a number.\r\n */\r\nconst parseUnitValue = value => {\r\n  return parseFloat(value || 0);\r\n};\r\n\r\n\r\n/**\r\n * Parses a CSS origin string (`perspective-origin`, `transform-origin`) into\r\n * it's X, Y and Z components and populates the supplied THREE.Vector3 with\r\n * the result.\r\n */\r\nconst parseOriginValue = (originString, vec3) => {\r\n  let transformOrigin = originString.split(' ');\r\n  vec3.set(\r\n    parseUnitValue(transformOrigin[0]),\r\n    parseUnitValue(transformOrigin[1]),\r\n    parseUnitValue(transformOrigin[2])\r\n  );\r\n};\r\n\r\n\r\n/**\r\n * Parses a CSS 3x2 matrix() or 4x4 matrix3d() string into its compontents and \r\n * populates the passed THREE.Matrix4 with the result.\r\n * \r\n * (https://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/)\r\n */\r\n\r\nconst parseTransformValue = (matrixString, mat4) => {\r\n  var c = matrixString.split(/\\s*[(),]\\s*/).slice(1, -1);\r\n\r\n  if (c.length === 6) {\r\n    // 'matrix()' (3x2)\r\n    mat4.set(\r\n      +c[0], -c[2],      0,  +c[4],\r\n      -c[1], +c[3],      0,  -c[5],\r\n          0,     0,      1,      0,\r\n          0,     0,      0,      1\r\n    );\r\n  } else if (c.length === 16) {\r\n    // matrix3d() (4x4)\r\n    mat4.set(\r\n      +c[0], -c[4],  +c[8], +c[12],\r\n      -c[1], +c[5],  -c[9], -c[13],\r\n      +c[2], -c[6], +c[10], +c[14],\r\n      +c[3], +c[7], +c[11], +c[15]\r\n    );\r\n  } else {\r\n    // handle 'none' or invalid values.\r\n    mat4.identity();\r\n  }\r\n};\r\n\r\n\r\nexport default {\r\n  parseTransformValue,\r\n  parseOriginValue,\r\n  parseUnitValue\r\n};\r\n","import cssUtils from './css';\r\n\r\n/**\r\n * Resolves and returns the transform and perspective properties for a given\r\n * element.\r\n */\r\n\r\nconst getTransformForElement = elem => {\r\n  let m1 = new THREE.Matrix4();\r\n  let transformMatrix = new THREE.Matrix4();\r\n  let transformOrigin = new THREE.Vector3();\r\n  let transformOriginMatrix = new THREE.Matrix4();\r\n  let osParent = elem;\r\n  let stack = [];\r\n  let posX = 0;\r\n  let posY = 0;\r\n\r\n\r\n\r\n  // We need to apply transforms from the root so we walk up the DOM tree,\r\n  // pushing each node onto a stack. While we're walking to the DOM we also\r\n  // resolve the elements X/Y position.\r\n  while (elem) {\r\n    if (elem === osParent) {\r\n      posX += elem.offsetLeft;\r\n      posY += elem.offsetTop;\r\n      osParent = elem.offsetParent;\r\n    }\r\n    stack.push(elem);\r\n    posX -= elem.scrollLeft;\r\n    posY -= elem.scrollTop;\r\n    elem = elem.parentElement;\r\n  }\r\n\r\n\r\n  m1.makeTranslation(posX, -posY, 0);\r\n\r\n  // Now we can resolve transforms.\r\n  while (elem = stack.pop()) {\r\n\r\n    let style = getComputedStyle(elem);\r\n    cssUtils.parseOriginValue(style.transformOrigin, transformOrigin);\r\n    cssUtils.parseTransformValue(style.transform, transformMatrix);\r\n\r\n    let ox = transformOrigin.x - elem.offsetWidth / 2;\r\n    let oy = transformOrigin.y - elem.offsetHeight / 2;\r\n    let oz = transformOrigin.z;\r\n\r\n    // If the computed `transform-origin` is a value other than `50% 50% 0`\r\n    // (`0,0,0` in THREE coordinate space) then we need to translate by the\r\n    // origin before multiplying the element's transform matrix. Finally, we\r\n    // need undo the translation.\r\n    if (ox !== 0 || oy !== 0 || oz !== 0) {\r\n      m1.multiply(transformOriginMatrix.makeTranslation(ox, -oy, oz));\r\n      m1.multiply(transformMatrix);\r\n      m1.multiply(transformOriginMatrix.makeTranslation(-ox, oy, -oz));\r\n    } else {\r\n      m1.multiply(transformMatrix);\r\n    }\r\n  }\r\n\r\n  return m1;\r\n};\r\n\r\n\r\nconst getProjectionForElement = elem => {\r\n  let perspectiveOrigin = new THREE.Vector3();\r\n  let perspective;\r\n  let clipBounds = {\r\n    left: 0,\r\n    top: 0,\r\n    right: innerWidth,\r\n    bottom: innerHeight\r\n  };\r\n  let cameraBounds = {\r\n    left: 0,\r\n    top: 0,\r\n    right: innerWidth,\r\n    bottom: innerHeight\r\n  };\r\n\r\n\r\n  while (elem) {\r\n    let style = getComputedStyle(elem);\r\n    let elemBounds = elem.getBoundingClientRect();\r\n\r\n    // TODO: It's possible to nest perspectives. Need to research the impact\r\n    // of this and, if possible, how to emulate it. For now, we'll just use\r\n    // the last value found.\r\n    let perspectiveValue = style.perspective;\r\n    if (!perspective) {\r\n      if (perspectiveValue !== 'none') {\r\n        perspective = cssUtils.parseUnitValue(perspectiveValue);\r\n\r\n        cameraBounds.top = elemBounds.top;\r\n        cameraBounds.left = elemBounds.left;\r\n        cameraBounds.right = elemBounds.right;\r\n        cameraBounds.bottom = elemBounds.bottom;\r\n\r\n        // TODO: strictly speaking, `perspective-origin` can be set on any\r\n        // element, not just the one that has `perspective`. Research the impact\r\n        // of setting perspective-origin on different elements in the DOM tree.\r\n        let perspectiveOriginValue = style.perspectiveOrigin;\r\n        if (perspectiveOriginValue) {\r\n          cssUtils.parseOriginValue(perspectiveOriginValue, perspectiveOrigin);\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    if (style.overflow !== 'visible') {\r\n      clipBounds.top = Math.max(elemBounds.top, clipBounds.top);\r\n      clipBounds.left = Math.max(elemBounds.left, clipBounds.left);\r\n      clipBounds.right = Math.min(elemBounds.right, clipBounds.right);\r\n      clipBounds.bottom = Math.min(elemBounds.bottom, clipBounds.bottom);\r\n    }\r\n\r\n    elem = elem.parentElement;\r\n\r\n  }\r\n\r\n  return {\r\n    perspective: perspective,\r\n    perspectiveOrigin: perspectiveOrigin,\r\n    clipBounds: clipBounds,\r\n    cameraBounds: cameraBounds\r\n  };\r\n};\r\n\r\n\r\n\r\nconst createStylesheet = cssText => {\r\n  let styleElem = document.createElement('style');\r\n  styleElem.textContent = cssText;\r\n  return styleElem;\r\n};\r\n\r\n\r\n\r\nexport default {\r\n  getTransformForElement,\r\n  getProjectionForElement,\r\n  createStylesheet\r\n};\r\n","import domUtils from './utils/dom';\r\n\r\nlet camera;\r\nlet overlayWidth;\r\nlet overlayHeight;\r\nlet perspectiveCamera;\r\nlet orthographicCamera;\r\nlet renderer;\r\nlet scene;\r\nlet light;\r\n\r\nconst objs = [];\r\n\r\n\r\nconst init = () => {\r\n  if (scene) {\r\n    return false;\r\n  }\r\n\r\n  // create the scene\r\n  scene = new THREE.Scene();\r\n\r\n  // add a light\r\n  light = new THREE.PointLight(0x808080, 2, 0);\r\n  light.position.set(0, 0, 0);\r\n  scene.add(light);\r\n\r\n  /*\r\n  var sphereSize = .5;\r\n  var pointLightHelper = new THREE.PointLightHelper( light, sphereSize, 0xff00ff );\r\n  scene.add( pointLightHelper );\r\n  */\r\n\r\n  // create the WebGL renderer\r\n  renderer = new THREE.WebGLRenderer({\r\n    antialias: true,\r\n    alpha: true\r\n  });\r\n\r\n  renderer.setPixelRatio(window.devicePixelRatio);\r\n  renderer.setScissorTest(true);\r\n  renderer.setClearColor(0x000000, 0);\r\n  renderer.autoClear = false;\r\n  renderer.sortObjects = false;\r\n  requestAnimationFrame(render);\r\n\r\n  return renderer.domElement;\r\n};\r\n\r\n\r\nconst add = obj => {\r\n  let index = objs.indexOf(obj);\r\n  if (index === -1) {\r\n    objs.push(obj);\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\n\r\nconst remove = (obj) => {\r\n  let index = objs.indexOf(obj);\r\n  if (index > -1) {\r\n    objs.splice(index, 1);\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\n\r\nconst update = () => {\r\n  overlayWidth = window.innerWidth;\r\n  overlayHeight = window.innerHeight;\r\n  camera = null;\r\n  renderer.setSize(overlayWidth, overlayHeight);\r\n  renderer.clear();\r\n\r\n  // Walk over each object and update it\r\n  objs.forEach(child => {\r\n    let elem = child.elem;\r\n    if (elem) {\r\n      let projection;\r\n      let transformMatrix;\r\n      let clipHeight;\r\n      let clipWidth;\r\n      let model = child.children[0];\r\n      let boundsElem = elem.shadowRoot.children[1];\r\n      let size = model.userData.size;\r\n      let elemWidth = elem.offsetWidth;\r\n      let elemHeight = elem.offsetHeight;\r\n      let scale = Math.min(elemWidth / size.x, elemHeight / size.y);\r\n      let objWidth = size.x * scale;\r\n\r\n      projection = domUtils.getProjectionForElement(elem);\r\n      clipHeight = projection.clipBounds.bottom - projection.clipBounds.top;\r\n      clipWidth = projection.clipBounds.right - projection.clipBounds.left;\r\n\r\n      // If the elements clip area has a height or width of `0`, bail out early.\r\n      if (clipWidth <= 0 || clipHeight <= 0) {\r\n        return;\r\n      }\r\n\r\n      transformMatrix = domUtils.getTransformForElement(elem);\r\n\r\n      // Apply the transform matrix of the DOM node to the model\r\n      child.rotation.setFromRotationMatrix(transformMatrix);\r\n      child.position.setFromMatrixPosition(transformMatrix);\r\n      child.scale.setFromMatrixScale(transformMatrix);\r\n\r\n      // Objects are normalised so we can scale them up by their width to\r\n      // render them at the intended size.\r\n      child.scale.multiplyScalar(scale);\r\n\r\n      // Now scale the DOM bounding box so it matches the size and shape of the\r\n      // model. An `IntersectionObserver` will use this DOM structure to decide\r\n      // if this model needs to be rendered at the next animation frame.\r\n      let scaleX = size.x * scale;\r\n      let scaleY = size.y * scale;\r\n      let scaleZ = size.z * scale;\r\n      boundsElem.style.transform = `translate(-50%,-50%)scale3d(${scaleX},${scaleY},${scaleZ})`;\r\n\r\n      // Three's coordinate space uses 0,0,0 as the screen centre so we need\r\n      // to adjust the computed X/Y position back to the top-left of the screen\r\n      // to match the CSS rendering position.\r\n      child.position.x -= objWidth - elemWidth / 2;\r\n      child.position.x += objWidth - overlayWidth / 2;\r\n      child.position.y -= elemHeight / 2;\r\n      child.position.y += overlayHeight / 2;\r\n\r\n      // Determine which camera to use to project this model and set its\r\n      // properties prior to rendering\r\n      if (projection.perspective) {\r\n        camera = setPerspectiveCamera(\r\n          projection.cameraBounds,\r\n          projection.perspective,\r\n          projection.perspectiveOrigin\r\n        );\r\n      } else {\r\n        camera = setOrthographicCamera(projection.cameraBounds);\r\n      }\r\n\r\n      light.position.x = projection.cameraBounds.left + (projection.cameraBounds.right - projection.cameraBounds.left) / 2 - overlayWidth / 2;\r\n      light.position.y = overlayHeight / 2 - projection.cameraBounds.top - (projection.cameraBounds.bottom - projection.cameraBounds.top) / 2;\r\n      light.position.z = camera.far;\r\n\r\n      // Set the clipping box (scissor) and render the element.\r\n      renderer.setScissor(\r\n        projection.clipBounds.left,\r\n        overlayHeight - projection.clipBounds.bottom,\r\n        clipWidth,\r\n        clipHeight\r\n      );\r\n      scene.add(child);\r\n      renderer.render(scene, camera);\r\n      scene.remove(child);\r\n\r\n    }\r\n  });\r\n\r\n  return !!camera;\r\n};\r\n\r\n\r\nconst setOrthographicCamera = (bounds) => {\r\n  let camera;\r\n\r\n  if (!orthographicCamera) {\r\n    orthographicCamera = new THREE.OrthographicCamera();\r\n  }\r\n\r\n  camera = orthographicCamera;\r\n  camera.left = bounds.left - overlayWidth / 2;\r\n  camera.top = -bounds.top + overlayHeight / 2;\r\n  camera.bottom = -bounds.bottom + overlayHeight / 2;\r\n  camera.right = bounds.right - overlayWidth / 2;\r\n  camera.near = -700;\r\n  camera.updateProjectionMatrix();\r\n\r\n  return camera;\r\n};\r\n\r\n\r\nconst setPerspectiveCamera = (bounds, perspective, perspectiveOrigin) => {\r\n  let camera;\r\n\r\n  if (!perspectiveCamera) {\r\n    perspectiveCamera = new THREE.PerspectiveCamera();\r\n  }\r\n\r\n  camera = perspectiveCamera;\r\n  camera.fov = 180 * (2 * Math.atan(overlayHeight / 2 / perspective)) / Math.PI;\r\n  camera.aspect = overlayWidth / overlayHeight;\r\n  camera.position.set(0, 0, perspective);\r\n  camera.updateProjectionMatrix();\r\n\r\n  // Add perspective-origin\r\n  let originX = overlayWidth / 2 - bounds.left - perspectiveOrigin.x;\r\n  let originY = overlayHeight / 2 - bounds.top - perspectiveOrigin.y;\r\n\r\n\r\n  // The default is origin for perspective is `50% 50%`, which equates to\r\n  // `0,0`. If the author hasn't specified a different value we don't need\r\n  // to make any adjustments to the projection matrix\r\n  if (originX !== 0 || originY !== 0) {\r\n\r\n    // copy the projection matrix\r\n    let tmpMatrix = camera.projectionMatrix.clone();\r\n\r\n    // set the camera projection matrix to the origin\r\n    camera.projectionMatrix.makeTranslation(\r\n      -originX / (overlayWidth / 2),\r\n      originY / (overlayHeight / 2),\r\n      0\r\n    );\r\n\r\n    // apply to original camera projection matrix\r\n    camera.projectionMatrix.multiply(tmpMatrix);\r\n\r\n    // remove the origin offset\r\n    tmpMatrix.makeTranslation(originX, -originY, 0);\r\n    camera.projectionMatrix.multiply(tmpMatrix);\r\n\r\n  }\r\n\r\n  return camera;\r\n};\r\n\r\n\r\nconst render = () => {\r\n  requestAnimationFrame(render);\r\n  update();\r\n};\r\n\r\n\r\nexport default {\r\n  init,\r\n  add,\r\n  remove,\r\n  render\r\n};\r\n","import modelLoader from './modelLoader';\r\nimport modelLayer from './modelLayer';\r\nimport domUtils from './utils/dom';\r\n\r\n\r\nconst objects = new WeakMap();\r\n\r\n\r\nconst ATTR_TO_CUSTOM_PROP_MAP = {\r\n  'width': '--xModelWidth',\r\n  'height': '--xModelHeight'\r\n}\r\n\r\nconst CANVAS_DEFAULT_STYLES =\r\n  ':root{' +\r\n    'transform-style:flat!important;' +\r\n  '}' +\r\n  '#x-model-renderLayer{' +\r\n    'position:fixed;' +\r\n    'top:0;' +\r\n    'left:0;' +\r\n    'pointer-events:none' +\r\n  '}';\r\n\r\n\r\nconst ELEMENT_DEFAULT_STYLES =\r\n  ':host{' +\r\n    'display:inline-block;' +\r\n    'width:var(--xModelWidth,200px);' +\r\n    'height:var(--xModelHeight,150px);' +\r\n    'transform-style:var(--xModelBoundingBoxTransformStyle, preserve-3d)' +\r\n  '}' +\r\n  '.boundingBox{' +\r\n    'visibility:var(--xModelBoundingBoxVisibility, hidden);' +\r\n    'transform-style:inherit;' +\r\n    'position:relative;' +\r\n    'left:50%;' +\r\n    'top:50%;' +\r\n    'width:1px;' +\r\n    'height:1px;' +\r\n    'background:#08c' +\r\n  '}' +\r\n  '.boundingBox__face{' +\r\n    'position:absolute;' +\r\n    'width:1px;' +\r\n    'height:1px;' +\r\n    'background:#0c0' +\r\n  '}' +\r\n  '.boundingBox__face:nth-child(1){transform:translateZ(-.5px)}' +\r\n  '.boundingBox__face:nth-child(2){transform:translateZ(.5px)}' +\r\n  '.boundingBox__face:nth-child(3){transform:translateY(-.5px)rotateX(90deg)}' +\r\n  '.boundingBox__face:nth-child(4){transform:translateY(.5px)rotateX(-90deg)}' +\r\n  '.boundingBox__face:nth-child(5){transform:translateX(.5px)rotateY(-90deg)}' +\r\n  '.boundingBox__face:nth-child(6){transform:translateX(-.5px)rotateY(-90deg)}';\r\n\r\n\r\nconst ELEMENT_HTML =\r\n  `<style>${ELEMENT_DEFAULT_STYLES}</style>` +\r\n  '<div class=\"boundingBox\">' +\r\n    '<div class=\"boundingBox__face\"></div>'.repeat(6) +\r\n  '</div>';\r\n\r\n\r\nlet styleElem;\r\nlet intersectionObserver;\r\n\r\n\r\nconst intersectionCallback = entries => {\r\n  entries.forEach(entry => {\r\n    let obj = objects.get(entry.target.parentElement);\r\n    if (entry.isIntersecting) {\r\n      if (obj.axisInView < 6) {\r\n        if (obj.axisInView === 0) {\r\n          modelLayer.add(obj);\r\n        }\r\n        obj.axisInView++;\r\n      }\r\n    } else {\r\n      if (obj.axisInView > 0) {\r\n        obj.axisInView--;\r\n        if (obj.axisInView === 0) {\r\n          modelLayer.remove(obj);\r\n        }\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\n\r\nconst initModelLayer = () => {\r\n  // The first time an element is added to the document we inject a\r\n  // stylesheet that contains its default styles. Ideally this would be\r\n  // appended to the shadow DOM, but support for that isn't great right now.\r\n  styleElem = domUtils.createStylesheet(CANVAS_DEFAULT_STYLES);\r\n  let head = document.documentElement.firstChild;\r\n  head.insertBefore(styleElem, head.firstChild);\r\n\r\n  // Initialize the model layer and append the resulting DOM node to the\r\n  // document root - outside the <body> to prevent perspective or transform\r\n  // styles from affecting it.\r\n  let renderDomElement = modelLayer.init();\r\n  renderDomElement.setAttribute('id', 'x-model-renderLayer');\r\n  document.documentElement.appendChild(renderDomElement);\r\n\r\n  // Use an intersection observer to watch for elements entering and leaving\r\n  // the viewport\r\n  intersectionObserver = new IntersectionObserver(intersectionCallback);\r\n\r\n};\r\n\r\n\r\nexport default class extends HTMLElement {\r\n\r\n  constructor() {\r\n    super();\r\n    // Create six child elements. These will be rotated and translated along the\r\n    // X Y and Z axis to create a bounding box around the model. These\r\n    // elements will be monitored by an `IntersectionObserver` which will add\r\n    // the model to the scene if the any elements are visible in the viewport\r\n    // and remove the model when no elements are visible\r\n    this.attachShadow({mode: 'open'});\r\n    this.shadowRoot.innerHTML = ELEMENT_HTML;\r\n  }\r\n\r\n  static get observedAttributes() {\r\n    return ['src', 'width', 'height'];\r\n  }\r\n\r\n  connectedCallback() {\r\n    if (!styleElem) {\r\n      initModelLayer();\r\n    }\r\n    let obj = objects.get(this);\r\n    if (obj && obj.elem !== this) {\r\n      let model = obj.children[0];\r\n      let size = model.userData.size;\r\n      let scale = Math.min(this.offsetWidth / size.x, this.offsetHeight / size.y);\r\n      let scaleX = size.x * scale;\r\n      let scaleY = size.y * scale;\r\n      let scaleZ = size.z * scale;\r\n\r\n      // Scale and distort the DOM bounding box (a cube) along X, Y and Z axis\r\n      // so it matches the size and shape of the models bounding box.\r\n      let box = this.shadowRoot.querySelector('.boundingBox');\r\n      box.style.transform = `translate(-50%,-50%)scale3d(${scaleX},${scaleY},${scaleZ})`;\r\n\r\n      // Monitor each face with an `IntersectionObserver` so we can determine if\r\n      // the model is visible in the viewport when it's rendered with\r\n      // perspective projection.\r\n      let faces = Array.from(box.children);\r\n      faces.forEach(elem => intersectionObserver.observe(elem));\r\n\r\n      obj.elem = this;\r\n      obj.axisInView = 0;\r\n\r\n      objects.set(box, obj);\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    let obj = objects.get(this);\r\n    if (obj && obj.elem === this) {\r\n      let box = this.shadowRoot.querySelector('.boundingBox');\r\n      let faces = Array.from(box.children);\r\n      faces.forEach(elem => intersectionObserver.unobserve(elem));\r\n      obj.elem = null;\r\n    }\r\n  }\r\n\r\n  attributeChangedCallback(attribute, oldValue, newValue) {\r\n    if (attribute === 'width' || attribute === 'height') {\r\n      if (newValue !== null) {\r\n        newValue += 'px';\r\n      }\r\n      let customProp = ATTR_TO_CUSTOM_PROP_MAP[attribute];\r\n      this.shadowRoot.children[0].sheet.rules[0].style.setProperty(customProp, newValue);\r\n    } else if (attribute === 'src') {\r\n      // call the disconnected callback handler to release the current model if\r\n      // one is attached\r\n      this.disconnectedCallback();\r\n\r\n      modelLoader.load(newValue).then(obj => {\r\n        let event = new UIEvent('load');\r\n        this.dispatchEvent(event);\r\n        objects.set(this, obj);\r\n        this.connectedCallback();\r\n      }).catch(e => {\r\n        let event = new UIEvent('error');\r\n        this.dispatchEvent(event);\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","let loader;\r\n\r\n\r\nexport default src => {\r\n\r\n  return new Promise((resolve, reject) => {\r\n\r\n    const loadHandler = gltf => {\r\n      resolve(gltf.scene);\r\n    }\r\n\r\n    const errorHandler = () => {\r\n      reject();\r\n    }\r\n\r\n    if (!loader) {\r\n      loader = new THREE.GLTFLoader();\r\n    }\r\n\r\n    return loader.load(src, loadHandler, null, errorHandler);\r\n\r\n  });\r\n}\r\n","let loader;\r\n\r\n\r\nexport default src => {\r\n\r\n  return new Promise((resolve, reject) => {\r\n\r\n    const loadHandler = obj => {\r\n      resolve(obj);\r\n    }\r\n\r\n    const errorHandler = () => {\r\n      reject();\r\n    }\r\n\r\n    if (!loader) {\r\n      loader = new THREE.OBJLoader();\r\n    }\r\n\r\n    return loader.load(src, loadHandler, null, errorHandler);\r\n\r\n  });\r\n}\r\n","import HTMLModelElement from './modelElement.js';\r\nimport modelLoader from './modelLoader.js';\r\nimport gltfLoader from './loaders/gltf';\r\nimport objLoader from './loaders/obj';\r\n\r\n\r\nif ('customElements' in window) {\r\n\r\n  if (!('THREE' in window)) {\r\n    throw 'THREE (threejs.org) is required.';\r\n  }\r\n\r\n  if ('GLTFLoader' in THREE) {\r\n    modelLoader.register('.gltf', gltfLoader);\r\n    modelLoader.register('.glb', gltfLoader);\r\n  }\r\n\r\n  if ('OBJLoader' in THREE) {\r\n    modelLoader.register('.obj', objLoader);\r\n  }\r\n\r\n  customElements.define('x-model', HTMLModelElement);\r\n}\r\n"],"names":["loader"],"mappings":"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"}